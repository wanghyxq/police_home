# 对接理发师历史预约接口计划

根据提供的接口文档，我们将进行以下修改：

## 1. 接口定义更新 (`api/haircut/haircut.js`)

在 `api/haircut/haircut.js` 中新增 `getBarberHistoryList` 接口：

*   **URL**: `/api/haircut/barber/history/list`
*   **Method**: `GET`
*   **Params**: `query` (包含 `pageNum`, `pageSize`, `appointDate`, `params[month]`)

## 2. 页面逻辑重构 (`pages/barber/history.vue`)

### A. 数据结构更新
*   将 `historyList` 渲染逻辑从 Mock 数据改为使用 API 返回的 `rows`。
*   数据映射：
    *   `time`: 对应 `appointTime`
    *   `date`: 对应 `appointDate`
    *   `userPhone`: 对应 `userPhone`
    *   `status`: 对应 `status`

### B. 筛选逻辑调整
*   `onDateChange` 方法需要根据 `filterType` 更新查询参数：
    *   如果 `filterType === 'day'`, 设置 `appointDate`。
    *   如果 `filterType === 'month'`, 设置 `params: { month: ... }`。
*   `resetFilter` 方法需要清空这些参数。

### C. 加载逻辑 (`loadData`)
*   调用 `getBarberHistoryList`，处理分页和状态管理（`loading`, `isEnd`）。
*   列表样式保持与工作台一致（即之前优化的三行式展示，去除用户名）。

## 3. 实施步骤

1.  **修改 API 文件**：添加 `getBarberHistoryList`。
2.  **修改 Vue 组件**：
    *   引入 API。
    *   重构 `loadData`。
    *   优化模板样式（复用工作台的样式结构）。
3.  **验证**：测试筛选、分页和数据显示。